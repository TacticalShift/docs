@Meta(Position=4 ) NORENDER
@Keywords(mmo) NORENDER

# Сборка миссии

После того как вы закончите декорирование ландашфта различными объектами и убедились, что при старте миссии они не взрываются и корректно отображаются, переходите к настройке Снаряжения, Зон DynAI и фреймворка.


## Снаряжение (dzn_gear)

Используйте dzn_gear для выдачи снаряжения союзным и вражеским силам. См. [подробную инструкцию](https://github.com/10Dozen/dzn_gear#google-slides-howto).

Создайте необходимый минимум наборов снаряжения для:

- играбельных персонажей;
- неиграбельных персонажей (противников, союзников и гражданских, если присутствуют в миссии);
- груза техники и ящиков.

##### Однозаразовые гранатометы (CUP)

В рюкзак и технику нужно класть не сам гранатомет, а магазин к нему (см. в  ките LAUNCHER WEAPON). Он при старте будет сконвертирован в гранатомет. 
При этом имейте в виду, что наборах снаряжения техники магазины указываются во второй строке:

    // Набор для юнита -- здесь "CUP_RPG18_M" - имя магазина для гранатомета
    ...
    ["<LAUNCHER WEAPON >>  ","CUP_launch_RPG18_Loaded","CUP_RPG18_M",["","","",""]], 
	...
	
    cargo_kit_1 = [
        [["CUP_arifle_AK74M_GL",2]], /* оружие */    
        [["30Rnd_545x39_Mag_F",15],["CUP_RPG18_M",2]], /* магазины - сюда и указываем */
        [["ACE_elasticBandage",50]], /* разные предметы */
        [["B_Kitbag_rgr",5]] /* рюкзаки */
    ];

Это сделано потому, что по умолчанию в CUP гранатометы многоразовые, а одноразовость это фича CBA и она вот так работает.

### Стандартное снаряжение юнита
По умолчанию dzn_gear экспортирует наборы снаряжения с стандартными предметами в униформе (набор бинтов, морфин, эпинефрин, 2 турникета, 2 пластиковые стяжки, фонарик для карты, беруши) и назначенными предметами (часы, карта, компас, рация, ночью - ПНВ).

Для лидерских ролей переключите dzn_gear клавишами PgUp и PgDown для выдачи расширенного набора (добавляются инструменты карты и бинокль).

Если вы хотите выдать специальный набор, то убедитесь, что у игроков как минимум будет набор медицинских бинтов и хотя бы 1 жгут!
<br />

    ["<UNIFORM ITEMS >> ",[["ACE_fieldDressing",5],["ACE_packingBandage",5],["ACE_elasticBandage",5],["ACE_tourniquet",2],["ACE_morphine",2],["ACE_epinephrine",2],["ACE_quikclot",5]]],

#### Снаряжение юнитов: Командиры
Командирам взвода и отделений необходимо выдать ДВ-радиостанцию (рюкзак), инструменты карты (ACE_Maptools) и бинокль\дальномер (Nite 21, Vector).
<br />Также не будет лишним выдать по 1-2 дымовых гранаты (разного цвета) всем командирам и лидерам команд.

#### Стандартный шаблон снаряжения

_Squad Leader, Platoon Leader, Командир отделения, Командир взвода_

- Винтовка, (опц.) прицел 4х или коллиматорный\открытый, (опц.) ЛЦУ
- x6-8 магазинов (опц. 1 с трассерными)
- (опц.) пистолет, 3 магазина
- х1-2 ручные гранаты
- x1-2 ручные дымовые гранаты
- Бинокль\Дальномер, инструменты карты
- ДВ рация

_FTL, Старший стрелок_

- Винтовка (опц. с подствольным гранатометом) или легкий пулемет (типа РПК), прицел 4х или коллиматорный\открытый, (опц.) ЛЦУ
- x8 магазинов (опц. 1 с трассерными)
- x6 гранат для подствольного гранатомета (осколочные)
- х4 гранат для подствольного гранатомета (цветной дым или осветительные)
- х1-2 ручные гранаты
- x1-2 ручные дымовые гранаты

_Grenadier, Стрелок (ГП)_

- Винтовка с подствольным гранатометом, коллиматорный\открытый, (опц.) ЛЦУ
- x8-10 магазинов (опц. 1 с трассерными)
- x6-10 гранат для подствольного гранатомета
- х1-2 ручные гранаты
- (опц.) одноразовый гранатомет типа РШГ\РПГ-18\АТ-4

_Automatic Rifleman, Пулеметчик_

- Пулемет, (опц.) прицел 4х, (опц.) ЛЦУ
- 2-3х коробки по 100
- х1-2 ручные гранаты

_Rifleman, Стрелок, Стрелок помощник гранатометчика, Гранатометчик_

- Винтовка, (опц.) коллиматорный прциел, (опц.) ЛЦУ
- x8-10 магазинов (опц. 1 с трассерными)
- х2-3 ручные гранаты
- Рюкзак с: 2-3 коробками для пулемета (или) 2-3 выстрелами для РПГ-7\SMAW
- (опц.) одноразовый гранатомет типа РШГ\РПГ-18\АТ-4 (или) РПГ-7\SMAW для гранатометчика + пристрелочные патроны


### Стандартное снаряжение техники

В инвентаре техники должны быть (минимум):

- боеприпасы подходящие пехоте (в магазинах (10) и лентах (3))
- ручные гранаты (4)
- подствольные гранаты (6)
- дымовые гранаты (2)
- предметы медицины (5 бинтов)

Для БТР/БМП и других машин поддержки кол-во припасов должно быть увеличено в 2-4 раза, а также добавлены ПТ средства (если доступны по сюжету).

Для ящиков со снаряжением кол-во припасов должно быть в 3-5 раз больше минимального (в отдельных ящиках могут быть несколько ПТ средств или спецсредств).


## Зоны DynAI
TBD


## Игровые персонажи
Используйте tSF 3DEN Tool для расстановки игровых персонажей - функции Add Playable Squad/Platoon.

## Транспорт

Установите достаточое количество машин (или другой техники) если они могут понадобится игрокам для достижения зоны операции. Обязательно ставьте технику сразу БЕЗ экипажа.

Добавьте в транспорт необходимое снаряжение (например, боеприпасы, медикаменты и т.п.)

В отличие от автотранспорта, для каждого доступного игрокам БТР и БМП должны быть также доступны и слоты экипажей (Командир экипажа + Водитель-механик для невооруженной; Командир экипажа + Стрелок-наводчик + Водитель-механик для вооруженной техники).



## Логистика

Если это не противоречит сценарию миссии, то обеспечьте игроков возможностью:

- вылечиться (поставить CCP),
- пополнить запасы боеприпасов (добавить киты для техники, поставить ящики),
- заправить и перевооружить технику (поставить топливные грузовики и грузовики с боеприпасами, FARP)


## Настройка фреймворка

### Логика миссии

Определите формальные цели, которые должны достичь игроки - уничтожить объект, эвакуировать персонажа в определенное место и т.п. Оформите эти цели в виде MissionCondition и проверьте их на непротиворечивость. Укажите цели в брифинге, убедитесь, что из брифинга понятно, что именно следует сделать для успеха.

### Настройка модулей
В файле <tt>dzn_tSFramework\Settings.yaml</tt> находятся общие настройки tSFramework.
<br />Для включения или отключения модулей отредактируйте соответствующие строки, поставив напротив желаемого модуля значение true (включить) или false (отключить).
<br />Например, чтобы отключить модуль CCP, следует указать <tt>CCP: false</tt>.

#### Брифинг (Briefing)
Откройте файл <tt>Helper.html</tt> в любом браузере и заполните все поля информацией о миссии.
<br />Нажмите 'Get file', чтобы экспортировать брифинг в виде файла <tt>tSF_briefing.sqf</tt>.
<br />Переместите файл в папку \dzn_tSFramework\Modules\Briefing (с заменой уже существующего)

#### Интро-текст (IntroText)
Обязательно задайте титры на старте миссии. Так вы кратко дадите понять игрокам место и время действия вашего сценария!

#### Пункт оказания медицинской помощи (CCP)
Через 3DEN Tool добавьте CCP в удобное место на карте. Помните, что CCP должен нахожиться вне зоны видимости противника, но одновременно с этим - быть достаточно близко к зоне активных действий.

Если вы планируете разрешить игрокам выбрать местоположение CCP - то оставьте триггер связанный с созданным GameLogic - во время брифинга игроки смогут выбрать любую позицию внутри этого триггера для размещения. Вы можете задать форму, размеры и положение триггера. Вы также можете привязать к GameLogic несколько тригеров, например, чтобы разрешить размещать CCP в разных концах карты.

Если игроки не выберут позицию для CCP вручную (либо если вы удалите связанные триггеры), то он будет размещен непосредственно на месте объекта GameLogic.

#### Пункт обслуживания техники (FARP)
Если в вашей миссии будет использована техника и игроки не действуют в тылу противника, то через 3DEN Tool добавьте FARP в удобное место на карте.

В плане настроек FARP полностью аналогичен CCP.


#### Условия миссии (MissionConditions)
Каждая миссия должна чем-то оканчиваться. Как минимум должен быть один позитивый и один негативный конец.

В файле ^Settings.yaml^ есть примеры функций для проверки условий и подсчета кол-ва юнитов. Если возникнут трудности - не стесняйтесь спросить в нашем Дискорде!

